# 俳句作成タスク
# 使用方法: e8 run --config examples/haiku-creation.yaml
#
# このタスクは「緩いcriteria + 厳しいjudgment」パターンの例です。
# 複数イテレーションが自然に発生することを意図しています。

task: "「秋」をテーマに俳句を3句作成する"

# criteria は緩め（表面的な条件のみ）
criteria:
  - "3句の俳句が作成されている"
  - "各句が5-7-5の形式になっている"
  - "秋に関連する内容が含まれている"

max_iterations: 2

# judgment は厳しく（細かい点まで評価）
prompts:
  judgment: |
    以下の観点で厳密に評価し、1つでも不十分なら is_complete=false としてください：

    【形式の厳密チェック】
    - 音数を1音ずつカウント（拗音「きゃ」=1音、長音「ー」=1音、促音「っ」=1音）
    - 字余り・字足らずは不可

    【季語の妥当性】
    - 歳時記に掲載されている正式な秋の季語か確認
    - 「秋」という直接的な語は季語として弱い、具体的な季語（紅葉、月見、虫の声など）を要求

    【俳句としての完成度】
    - 切れ字（や、かな、けり、けれ）が効果的に使われているか
    - 説明的でなく、情景が目に浮かぶ描写か
    - 3句で情景が重複していないか

    【改善指示】
    不十分な点がある場合、具体的にどう修正すべきか suggested_next_action で指示してください。
